<!DOCTYPE html>
<html lang="de">

<head>
    <%- include('./partials/head'); -%>
    <link rel="stylesheet" type="text/css" href="./style/stylesheet.css">
    <link rel="icon" type="image/x-icon" href="./pictures/favicon.ico">
    <script src="javascripts/chart.js" type="text/javascript"></script>
</head>

<body>
    <!-- Header -->
    <header>
        <%- include('./partials/header'); -%>
    </header>
    <!-- Main -->
    <div class="content index">
        <div class="goal-tracker">
            <form action="" name="ZielBalkenErstellen" method="get">
                <img src="./pictures/nemoBalkenOhneSchrift.jpeg" alt="Zeigt wie dicht wir dem Ziel sind">
                <p>Platzhalter</p>
            </form>
        </div>
        <article>
            <h1> CO<sub>2</sub>-Ersparnis </h1>
            <canvas id="revenueAll"></canvas>
        </article>
    </div>

    <!-- Footer -->
    <footer>
        <%- include('./partials/footer'); -%>
    </footer>
    <%- include('./partials/script'); -%>
    <!-- Ab hier kommen die messy chart scripte, und nein erstmal nicht auslagern -->
    <!-- Revenue All -->
    <script>
        var data = <% - JSON.stringify(umsatzAlle) %>;
    </script>
    <script>
        // define hear the needed datasets
        var years = [];
        var revenue = [];

        for (var i in data) {
            years.push(data[i].umsatz_jahr);
            revenue.push(data[i].umsatz_umsatz);
        }

        var chartdata = {
            labels: years,
            datasets: [
                {
                    label: 'Umsatz',
                    backgroundColor: 'rgba(200, 200, 200, 0.75)',
                    borderColor: 'rgba(200, 200, 200, 0.75)',
                    hoverBackgroundColor: 'rgba(200, 200, 200, 1)',
                    hoverBorderColor: 'rgba(200, 200, 200, 1)',
                    data: revenue
                }
            ]
        };

        var ctx = document.getElementById('revenueAll');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: chartdata,
            options: {
                responsive: true,
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                // scales: {
                //     xAxes: [{
                //         display: true,
                //         scaleLabel: {
                //             display: true,
                //             labelString: 'Jahr'
                //         }
                //     }],
                //     yAxes: [{
                //         id: 'A',
                //         display: true,
                //         scaleLabel: {
                //             display: true,
                //             labelString: 'CO2-Emissionen in Prozent'
                //         },
                //         ticks: {
                //             beginAtZero: true,
                //             suggestedMax: 100,
                //             stepSize: 10
                //         }
                //     }, {
                //         id: 'B',
                //         display: true,
                //         position: 'right',
                //         scaleLabel: {
                //             display: true,
                //             labelString: 'Umsatz in Prozent'
                //         },
                //         ticks: {
                //             beginAtZero: true,
                //             suggestedMax: 100,
                //             stepSize: 10
                //         }
                //     }]
                // }
            }
        });
    </script>
</body>

</html>